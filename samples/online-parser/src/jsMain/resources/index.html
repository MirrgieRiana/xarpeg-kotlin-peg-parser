<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Online Parser Sample</title>
    <style>
        :root {
            color-scheme: light;
            --surface: #ffffff;
            --ink: #1f2933;
            --muted: #52606d;
            --accent: #2563eb;
            --accent-strong: #1d4ed8;
            --accent-strong-hover: #143ec7;
            --accent-focus: #cbdafe;
            --border: #e5e7eb;
            --textarea-bg: #fbfdff;
            --button-text: #ffffff;
            --shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
        }
        * { box-sizing: border-box; }
        body {
            font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
            background: radial-gradient(circle at 20% 20%, #f3f6ff, #f8fafc 45%, #eef2ff 100%);
            color: var(--ink);
            margin: 0;
            padding: 2.5rem 1.25rem 3rem;
            display: flex;
            justify-content: center;
        }
        main {
            width: min(960px, 100%);
            background: var(--surface);
            padding: 2rem 1.75rem;
            border-radius: 18px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        h1 {
            margin: 0 0 1rem;
            font-size: clamp(1.6rem, 3vw, 2rem);
            letter-spacing: 0.02em;
        }
        p.lead { margin: 0 0 1.5rem; color: var(--muted); }
        label { font-weight: 700; color: var(--ink); }
        textarea {
            width: 100%;
            min-height: 140px;
            padding: 0.85rem 1rem;
            margin-top: 0.4rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--textarea-bg);
            color: var(--ink);
            font-size: 1rem;
            resize: vertical;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.03);
        }
        textarea:focus {
            outline: 2px solid var(--accent-focus);
            border-color: var(--accent-focus);
        }
        .section {
            display: grid;
            gap: 0.4rem;
            margin-bottom: 1.5rem;
        }
        .section-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            justify-content: space-between;
        }
        button {
            appearance: none;
            border: 1px solid var(--accent-strong);
            background: linear-gradient(135deg, var(--accent), var(--accent-strong));
            color: var(--button-text);
            padding: 0.55rem 1.2rem;
            border-radius: 12px;
            font-weight: 700;
            letter-spacing: 0.01em;
            cursor: pointer;
            box-shadow: 0 8px 18px rgba(37, 99, 235, 0.25);
            transition: transform 120ms ease, box-shadow 120ms ease, filter 120ms ease;
        }
        button:hover { filter: brightness(1.03); box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3); }
        button:active { transform: translateY(1px); }
        .source {
            display: inline-flex;
            align-items: center;
            gap: 0.45rem;
            color: var(--accent-strong);
            font-weight: 700;
            text-decoration: none;
            border-bottom: 1px solid rgba(37, 99, 235, 0.25);
            padding-bottom: 0.08rem;
        }
        .source:hover { color: var(--accent-strong-hover); }
    </style>
</head>
<body>
    <main>
        <h1>Online Parser Sample</h1>
        <p class="lead">Try editing the input to see the parser output update live.</p>

        <div class="section">
            <label for="input">Input</label>
            <textarea id="input">2*(3+4)+5</textarea>
        </div>

        <div class="section">
            <div class="section-header">
                <label for="output">Output</label>
                <button id="parse">Parse</button>
            </div>
            <textarea id="output" readonly></textarea>
        </div>

        <a class="source" href="https://github.com/MirrgieRiana/xarpeg-kotlin-peg-parser/tree/main/samples/online-parser" target="_blank" rel="noopener noreferrer">
            View this sample's source on GitHub
        </a>
    </main>

    <script type="module">
        import { parseExpression } from "./online-parser.mjs";

        const input = document.getElementById("input");
        const output = document.getElementById("output");
        const button = document.getElementById("parse");

        const updateOutput = () => {
            output.value = parseExpression(input.value);
        };

        button.addEventListener("click", updateOutput);
        input.addEventListener("input", updateOutput);

        // Only update output on page load if input is not empty
        if (input.value.trim() !== "") {
            updateOutput();
        }
    </script>
</body>
</html>
